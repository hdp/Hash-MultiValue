NAME
    Hash::MultiValue - Store multiple values per key

SYNOPSIS
      use Hash::MultiValue;

      my $hash = Hash::MultiValue->new(
          foo => 'a',
          foo => 'b',
          bar => 'baz',
      );

      # $hash is an object, but can be used as a hashref and DWIMs!

      print $hash->{foo};        # 'b' (the last entry)
      my @foo = @{$hash->{foo}}; # ('a', 'b')

      keys %$hash; # ('foo', 'bar') not guaranteed to be ordered

      # get a plain hash. values are always array reference
      %hash = $hash->as_hash;

      # get a pair so you can pass to new()
      @pairs = $hash->flatten; # ('foo' => 'a', 'foo' => 'b', 'bar' => 'baz')

      # Object Oriented get
      my $v = $hash->get('foo'); # always 'b', independent of context
      my @v = $hash->getall('foo'); # ('a', 'b')

      $hash->keys; # ('foo', 'bar')

DESCRIPTION
    Hash::MultiValue is an object that behaves like a hash reference that
    contains multiple values per key, inspired by MultiDict of WebOb.

    It uses "tie" to reflect writes to a hash, and also a blessed objects
    with "overload" to return values so it does the right thing in
    stringification and array derefernces context.

NOTES ABOUT ref
    If your existing application uses "ref" to check if the hash value is
    multiple, i.e.:

      my $form = $req->parameters;
      my @v = ref $form->{v} eq 'ARRAY' ? @{$form->{v}} : ($form->{v});

    The "ref" call would return the string *Hash::MultiValue::Value* by
    default, so your code always assumes that it is a single value element.
    To avoid this, you can use UNIVERSAL::ref module, and then if
    "$form->{v}" has multiple values "ref" would return "ARRAY" instead, and
    your code would continue working.

AUTHOR
    Tatsuhiko Miyagawa <miyagawa@bulknews.net>

LICENSE
    This library is free software; you can redistribute it and/or modify it
    under the same terms as Perl itself.

SEE ALSO
    <http://pythonpaste.org/webob/#multidict> Tie::Hash::MultiValue

